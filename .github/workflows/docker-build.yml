# version 行其實會被 Docker Compose 忽略，也可以刪掉
version: "3.8"

services:
  backend:
    image: ghcr.io/shackarbeit/drug-backend:latest
    container_name: drug-backend
    restart: unless-stopped

    # 原本如果有這段，現在「完全移除」：
    # env_file:
    #   - .env.backend

    # 如果有必要的環境變數，可以改用 environment 寫在這裡
    # （沒有特別需求也可以整段拿掉）
    environment:
      - NODE_ENV=production

    ports:
      - "4000:4000"  # 你實際 NestJS 對外 port，依你專案調整

    # SQLite 資料庫 volume（依你目前的結構來看，大多會像這樣）
    volumes:
      - ./data:/app/data

  frontend:
    image: ghcr.io/shackarbeit/drug-frontend:latest
    container_name: drug-frontend
    restart: unless-stopped

    ports:
      - "3000:3000"  # Next.js 對外 port，依你實際設定調整

    depends_on:
      - backend
