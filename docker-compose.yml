version: "3.9"

services:
  backend:
    image: ghcr.io/ShackArbeit/drug-backend:latest
    container_name: drug-backend
    restart: unless-stopped
    ports:
      # 左：VPS 對外 port；右：容器內 NestJS port
      - "3001:3001"
    env_file:
      # 可選：放 JWT_SECRET、MAIL_CONFIG 等
      - .env.backend
    volumes:
      - ./data:/app/data

  frontend:
    image: ghcr.io/ShackArbeit/drug-frontend:latest
    container_name: drug-frontend
    restart: unless-stopped
    depends_on:
      - backend
    ports:
      - "3000:3000"
    env_file:
      - .env.frontend
    # 例如 .env.frontend 可以放：
    # NEXT_PUBLIC_API_URL=http://localhost:3001
